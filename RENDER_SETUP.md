# Render Setup Guide for Renvo

This guide details how to deploy the Renvo application to [Render](https://render.com), a modern cloud platform optimized for Node.js applications.

## Prerequisites
- A [Render](https://render.com) account.
- This repository pushed to your GitHub account.
- Neon Database (Postgres) connection string.
- Stripe API Keys.
- Gemini API Key.

## 1. Create Web Service on Render
1.  Log in to your [Render Dashboard](https://dashboard.render.com).
2.  Click **"New +"** and select **"Web Service"**.
3.  Connect your GitHub account if you haven't already.
4.  Search for your `renvo` repository and click **"Connect"**.

## 2. Configuration (Automatic via render.yaml)
1.  Render should detect the `render.yaml` file in the repository.
2.  It will ask you to approve the configuration.
3.  **Instance Type**: Select "Free" (or a paid plan for 24/7 uptime).

## 3. Environment Variables
You will be prompted to enter the values for the environment variables defined in `render.yaml`.
*   `DATABASE_URL`: Your Neon Postgres connection string.
*   `STRIPE_SECRET_KEY`: `sk_...`
*   `STRIPE_PUBLISHABLE_KEY`: `pk_...`
*   `STRIPE_WEBHOOK_SECRET`: `whsec_...`
*   `GEMINI_API_KEY`: Your Google Gemini API Key.

*Note: `SESSION_SECRET` will be auto-generated by Render.*

## 4. Deploy
1.  Click **"Apply"** or **"Create Web Service"**.
2.  Render will start the build process (`npm install && npm run build`).
3.  Once built, it will start the app (`npm start`).
4.  Your app will be live at `https://renvo-xxxx.onrender.com`.

## 5. Post-Deploy
1.  **Stripe Webhook**:
    *   Go to your [Stripe Dashboard > Webhooks](https://dashboard.stripe.com/webhooks).
    *   Add an endpoint: `https://YOUR-RENDER-URL.onrender.com/api/stripe/webhook`
    *   Select events: `checkout.session.completed`, `customer.subscription.updated`, `customer.subscription.deleted`.
    *   Copy the **Signing Secret** (`whsec_...`).
    *   Update the `STRIPE_WEBHOOK_SECRET` in Render dashboard (Environment tab) if it's different from what you initially set.

## 6. Custom Domain Setup (HostGator)
To use your HostGator domain (e.g., `www.yourdomain.com`) with Render:

### Step A: Add Domain in Render
1.  In your Render Dashboard, go to your Web Service > **Settings**.
2.  Scroll down to **"Custom Domains"**.
3.  Click **"Add Custom Domain"**.
4.  Enter your domain name (e.g., `www.yourdomain.com`).
5.  Render will provide you with a **DNS Target** (e.g., `renvo-xxxx.onrender.com`) and a **Verification** value.

### Step B: Update DNS in HostGator (cPanel)
1.  Log in to HostGator **cPanel**.
2.  Find **"Zone Editor"** or **"Simple Zone Editor"** under "Domains".
3.  **For `www.yourdomain.com`**:
    *   Add a **CNAME Record**.
    *   **Name**: `www`
    *   **CNAME**: `renvo-xxxx.onrender.com` (The value from Render).
4.  **For root `yourdomain.com`**:
    *   Render recommends using an **A Record**.
    *   Find the "Root Domain" instructions in Render's "Add Custom Domain" window. It will give you an IP address (e.g., `216.24.57.1`).
    *   In HostGator Zone Editor, edit/add the **A Record** for `yourdomain.com` (or `@`) to point to that IP.

*Note: DNS changes can take up to 24-48 hours to propagate, but often happen within minutes.*
